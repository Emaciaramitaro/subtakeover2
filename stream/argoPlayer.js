!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Argo=t():e.Argo=t()}(self,(()=>(()=>{"use strict";var e={d:(t,a)=>{for(var o in a)e.o(a,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:a[o]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var t={};e.d(t,{default:()=>o});var a="shaka";!function(){console.log("Argo Prepare.");try{var t=e.g.AAMP.version;return void(parseFloat(t)>=parseFloat("2.0")?(console.log("AAMP available; version="+t),a="aamp"):console.log("Requested AAMP version 2.0 < "+t+" available version"))}catch(e){console.log("AAMP not available")}if("shaka"==a){var o=document.createElement("script");o.src="https://cdnjs.cloudflare.com/ajax/libs/mux.js/5.11.3/mux.js",document.head.appendChild(o);var n=document.createElement("script");n.src="https://cdn.jsdelivr.net/npm/shaka-player@4.2.2/dist/shaka-player.compiled.debug.min.js",document.head.appendChild(n)}}();class o{constructor(t){return"aamp"==a?new e.g.AAMPMediaPlayer(t):(this.playerState=0,new n(t))}}class n{constructor(t){console.log(t+" using shaka"),e.g.shaka.polyfill.installAll(),this.video=document.querySelector("video"),this.player=new e.g.shaka.Player(this.video),this.drmData={drm:{servers:{"com.widevine.alpha":"","com.microsoft.playready":""}}}}load(e,t){console.log("SHAKA loading "+e),this.player.load(e)}play(){this.video.playbackRate=1,this.video.play()}pause(){this.video.pause()}seek(e){this.video.currentTime=e,console.log("Playback seeked to: "+e)}getCurrentPosition(){return this.video.currentTime}stop(){this.video.pause(),this.video.currentTime=0}getPlaybackRate(){return this.video.playbackRate}setPlaybackRate(e,t){this.player.trickPlay(e)}initConfig(e){console.log("Invoked initConfig::  received object: "+JSON.stringify(e))}setDRMConfig(e){e.hasOwnProperty("com.microsoft.playready")&&(this.drmData.drm.servers["com.microsoft.playready"]=e["com.microsoft.playready"]),e.hasOwnProperty("com.widevine.alpha")&&(this.drmData.drm.servers["com.widevine.alpha"]=e["com.widevine.alpha"]),this.player.configure(this.drmData)}getAvailableVideoTracks(){return console.log(this.player.getVariantTracks()),this.player.getVariantTracks()}getAvailableAudioTracks(){let e=this.player.getAudioLanguages(),t=[];for(let a=0;a<e.length;a++){let o=[];o.language=e[a],t.push(o)}return t}setAudioLanguage(e){this.player.selectAudioLanguage(e)}getAvailableTextTracks(){let e=this.player.getTextTracks(),t=[];for(let a=0;a<e.length;a++){let o=[];o.language=e[a].language,o.instreamId=e[a].originalTextId,"subtitle"==e[a].kind?o.type="SUBTITLES":"caption"==e[a].kind&&(o.type="CLOSED-CAPTIONS"),t.push(o)}return console.log(t),t}setTextTrack(e){let t=this.player.getTextTracks();for(let a=0;a<t.length;a++)if(t[a].originalTextId==e){this.player.selectTextTrack(t[a]);break}this.player.setTextTrackVisibility(!0)}setClosedCaptionStatus(e){this.player.setTextTrackVisibility(e)}addCustomHTTPHeader(t,a,o){this.player.getNetworkingEngine().registerRequestFilter((function(o,n){o==e.g.shaka.net.NetworkingEngine.RequestType.LICENSE&&(n.headers[t]=a)}))}addEventListener(e,t){!function(e,t,a,o){var n=document.querySelector("video");"playbackStarted"===a?n.addEventListener("playing",function(){o({})}.bind(this)):"playbackFailed"===a?n.addEventListener("error",function(e){var t={};console.log(JSON.stringify(e)),t.shouldRetry=!1,t.code="null",t.description="Playback Failed",o(t)}.bind(this)):"playbackSpeedChanged"===a?n.addEventListener("ratechange",function(){var e={};e.speed=n.playbackRate,e.reason="speedChange",o(e)}.bind(this)):"playbackCompleted"===a?n.addEventListener("ended",function(){o({})}.bind(this)):"playlistIndexed"===a?console.log("playbackStateChanged Event"):"playbackProgressUpdate"===a?n.addEventListener("timeupdate",function(){var e={};e.durationMiliseconds=1e3*n.duration,e.positionMiliseconds=1e3*n.currentTime,e.playbackSpeed=n.playbackRate,e.startMiliseconds=0,e.endMiliseconds=0,e.currentPTS=0,e.videoBufferedMiliseconds=0,o(e)}.bind(this)):"decoderAvailable"===a?console.log("decoderAvailable Event"):"jsEvent"===a?console.log("jsEvent Event"):"mediaMetadata"===a?console.log("mediaMetadata Event"):"enteringLive"===a?console.log("enteringLive Event"):"bitrateChanged"===a?console.log("bitrateChanged Event"):"timedMetadata"===a?console.log("timedMetadata Event"):"bulkTimedMetadata"===a?console.log("bulkTimedMetadata Event"):"playbackStateChanged"===a?console.log("playbackStateChanged Event"):"speedsChanged"===a?console.log("speedsChanged Event"):"seeked"===a?n.addEventListener("seeked",function(){var e={};e.position=n.currentTime,o(e)}.bind(this)):"tuneProfiling"===a?console.log("tuneProfiling Event"):"bufferingChanged"===a?console.log("bufferingChanged Event"):"durationChanged"===a?console.log("durationChanged Event"):"audioTracksChanged"===a?console.log("audioTracksChanged Event"):"textTracksChanged"===a?console.log("textTracksChanged Event"):"contentBreaksChanged"===a?console.log("contentBreaksChanged Event"):"contentStarted"===a?console.log("contentStarted Event"):"contentCompleted"===a?console.log("contentCompleted Event"):"drmMetadata"===a?console.log("drmMetadata Event"):"anomalyReport"===a?console.log("anomalyReport Event"):"vttCueDataListener"===a?console.log("vttCueDataListener Event"):"adResolved"===a?console.log("adResolved Event"):"reservationStart"===a?console.log("reservationStart Event"):"reservationEnd"===a?console.log("reservationEnd Event"):"placementStart"===a?console.log("placementStart Event"):"placementEnd"===a?console.log("placementEnd Event"):"placementError"===a?console.log("placementError Event"):"placementProgress"===a?console.log("placementProgress Event"):"metricsData"===a?console.log("metricsData Event"):"id3Metadata"===a?console.log("id3Metadata Event"):"drmMessage"===a?console.log("drmMessage Event"):"blocked"===a?console.log("blocked Event"):"contentGap"===a?console.log("contentGap Event"):"httpResponseHeader"===a?console.log("httpResponseHeader Event"):"watermarkSessionUpdate"===a&&console.log("watermarkSessionUpdate Event")}(0,0,e,t)}}return t.default})()));
